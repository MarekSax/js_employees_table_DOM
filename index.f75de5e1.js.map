{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst tableBody = document.querySelector('tbody');\nconst tableHeaders = document.querySelectorAll('thead th');\nconst tableRows = tableBody.rows;\n\n// sort table\n\nlet descOrder = false;\nlet sortCol;\n\ntableHeaders.forEach(header => header.addEventListener('click', e => {\n  const index = [...tableHeaders].indexOf(e.target);\n\n  const sortedTable = [...tableRows].sort((a, b) => {\n    const aContent = a.children[index].innerHTML;\n    const bContent = b.children[index].innerHTML;\n\n    if (descOrder && sortCol === e.target) {\n      if (aContent[0] === '$' || !isNaN(aContent)) {\n        return Number(bContent.replace(/\\D/g, ''))\n          - Number(aContent.replace(/\\D/g, ''));\n      };\n\n      return bContent.localeCompare(aContent);\n    };\n\n    if (aContent[0] === '$' || !isNaN(aContent)) {\n      return Number(aContent.replace(/\\D/g, ''))\n        - Number(bContent.replace(/\\D/g, ''));\n    };\n\n    return aContent.localeCompare(bContent);\n  });\n\n  tableBody.append(...sortedTable);\n  descOrder = !descOrder;\n  sortCol = e.target;\n}));\n\n// select row\n\nlet selectedRow;\n\ntableBody.addEventListener('click', (e) => {\n  const currentRow = e.target.closest('tr');\n\n  if (selectedRow && selectedRow !== currentRow) {\n    selectedRow.classList.remove('active');\n  }\n\n  if (currentRow) {\n    currentRow.classList.add('active');\n    selectedRow = currentRow;\n  }\n});\n\n// add form\n\nconst form = document.createElement('form');\n\nform.noValidate = true;\nform.classList.add('new-employee-form');\n\nfor (const header of tableHeaders) {\n  const label = document.createElement('label');\n\n  label.textContent = header.textContent + ': ';\n\n  if (header.textContent !== 'Office') {\n    const input = document.createElement('input');\n\n    input.dataset.qa = input.name = header.textContent.toLowerCase();\n    input.setAttribute('required', '');\n\n    switch (header.textContent) {\n      case 'Age':\n        input.type = 'number';\n        input.min = 18;\n        input.max = 90;\n        break;\n      case 'Salary':\n        input.type = 'number';\n        break;\n      default:\n        input.type = 'text';\n        break;\n    }\n    label.append(input);\n  } else {\n    const offices = [...tableRows]\n      .map(row => row.cells[2].innerText)\n      .filter((item, index, array) => array.indexOf(item) === index)\n      .sort();\n\n    const select = document.createElement('select');\n\n    select.dataset.qa = select.name = header.textContent.toLowerCase();\n\n    select.setAttribute('required', '');\n\n    const optionDefault = document.createElement('option');\n\n    optionDefault.innerText = 'Choose your office';\n    optionDefault.setAttribute('disabled', '');\n    optionDefault.setAttribute('selected', '');\n    optionDefault.value = '';\n    select.append(optionDefault);\n\n    for (const office of offices) {\n      const option = document.createElement('option');\n\n      option.value = option.innerText = office;\n      select.append(option);\n    }\n\n    label.append(select);\n  }\n\n  form.append(label);\n}\n\nconst saveButton = document.createElement('button');\n\nsaveButton.innerText = 'Save to table';\nform.append(saveButton);\ndocument.body.append(form);\n\n// submit form\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const fields = [...e.target.elements];\n\n  if (fields.some(field => field.validity.valueMissing)) {\n    pushNotification(\n      'error',\n      'All fields must be filled',\n      'error',\n    );\n  } else if (fields[0].value.length < 4) {\n    pushNotification(\n      'error',\n      'Name must be at least 4 characters long.',\n      'error',\n    );\n  } else if (fields[3].validity.rangeUnderflow\n      || fields[3].validity.rangeOverflow) {\n    pushNotification(\n      'error',\n      'Age must be between 18 and 90.',\n      'error',\n    );\n  } else {\n    const data = new FormData(form);\n    const newRow = tableBody.insertRow(0);\n\n    for (const entry of data.entries()) {\n      const newCell = newRow.insertCell();\n\n      if (entry[0] === 'salary') {\n        newCell.innerText = `$${Number(entry[1]).toLocaleString('en-US')}`;\n        continue;\n      }\n      newCell.innerText = entry[1];\n    };\n\n    pushNotification(\n      'success',\n      'User added to table',\n      'success',\n    );\n  }\n});\n\n// pushNotification function\n\nconst pushNotification = (title, description, type) => {\n  const body = document.body;\n\n  body.insertAdjacentHTML('beforeend', `\n    <div class=\"${type} notification\" data-qa=\"notification\">\n      <h2 class=\"title\">${title}</h2>\n      <p>${description}</p>\n    </div>\n  `);\n\n  const message = document.querySelector(`.${type}`);\n\n  setTimeout(() => {\n    message.remove();\n  }, 2000);\n};\n\n// cell edit\n\nconst tableCells = tableBody.querySelectorAll('td');\n\ntableCells.forEach(cell => {\n  let currentValue;\n\n  cell.addEventListener('dblclick', e => {\n    const target = e.target;\n\n    currentValue = target.innerText;\n\n    e.target.innerText = '';\n\n    const cellInput = document.createElement('input');\n\n    cellInput.classList.add('cell-input');\n    cellInput.value = currentValue;\n\n    if (target === target.parentElement.children[3]) {\n      cellInput.setAttribute('type', 'number');\n    };\n\n    if (target === target.parentElement.children[4]) {\n      cellInput.setAttribute('type', 'number');\n      cellInput.value = Number(currentValue.replace(/\\D/g, ''));\n    };\n\n    e.target.append(cellInput);\n\n    cellInput.focus();\n\n    const handleCellInput = () => {\n      if (cellInput.value.trim() === '') {\n        target.innerText = currentValue;\n      } else {\n        target.innerText = cellInput.value;\n      }\n\n      if (target === target.parentElement.children[4]) {\n        target.innerText = `$${Number(cellInput.value)\n          .toLocaleString('en-US')}`;\n      }\n    };\n\n    cellInput.addEventListener('blur', () => {\n      handleCellInput();\n    });\n\n    cellInput.addEventListener('keypress', f => {\n      if (f.key === 'Enter') {\n        handleCellInput();\n      }\n    });\n  });\n});\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}